# Cocos2d-html5 V2.1.5版本升级为V2.2版本指南

- 改变	- 改善精灵、节点及 LabelTTF类，由分离代码变为结合代码，以保证其可维护性，现已清理干净	- 在画面模式中，cc.Sprite及其子类（subClasses）纹理已由DOM组件变成cc.Texture2D	- 改善后的cc.Texture2d无需预先加载图像资源即可直接使用，你在创建一个新的场景或层时无需等待资源加载	- 将CCBReader及GUI移动至Cocos2d-x 2.1.4	- 改善更新了动作（Action）函数，避免使用暂时性对象，这对GC及性能而言都有所帮助。	- 为提高性能，改进LabelTTF的渲染，将其由直接绘画变为了预渲染，在手机浏览器上绝对比以前要快	- 为保证兼容性，根据JSB修订HTML5的API，比如：cc.ParticleSystemQuad 已经被融合到cc.ParticleSystem，请根据本维基网站第二部分内容对其进行检查	- 为手机浏览器添加隐藏的url地址栏（Hiding url address bar），请检查模版及hello world	- 我们已为RenderTexture重新编写画面模式（Canvas Mode），以适应WebGL界面	- 添加支持Armature的帧事件，碰撞机及混合类型。现在，Armature支持两种工具：1. CocoStudio(windows,[http://www.cocostudio.org](http://www.cocostudio.org)), 2.DragonBones(flash,[https://github.com/2youyouo2/SkeletonAnimationDesignPanel](https://github.com/2youyouo2/SkeletonAnimationDesignPanel))	- 在手机浏览器的画面及台式电脑浏览器的WebGL中，设置自动渲染模式默认值
- API改变：	1.	cc.RectMake, cc.SizeMake及cc.PointMake已被弃用，请使用cc.rect, cc.size及cc.p。var aRect = cc.RectMake(8,8,8,8); 变成var aRect = cc.rect(8,8,8,8);var aSize = cc.SizeMake(8,8); 变成var aSize = cc.size(8,8);var aPoint = cc.PointMake(8,8); 变成 var aPoint = cc.p(8,8);	2.	cc.Director.getInstance().getTouchDispatcher().addTargetedDelegate, cc.Director.getInstance().getTouchDispatcher().addStandardDelegate 及 cc.Director.getInstance().getTouchDispatcher().removeDelegate 已被弃用, 请使用cc.registerTargetedDelegate, cc.registerStandardDelegate及cc.unregisterTouchDelegate。 cc.Director.getInstance().getTouchDispatcher().addTargetedDelegate(this, this._touchPriority, true) 变成cc.registerTargetedDelegate(this._touchPriority, true, this);cc.Director.getInstance().getTouchDispatcher().addStandardDelegate(this,this._touchPriority) 变成cc.registerStandardDelegate(this,this._touchPriority);cc.Director.getInstance().getTouchDispatcher().removeDelegate(this)变成 cc.unregisterTouchDelegate(this);	3.	cc.ParticleSystemQuad 已被融合进cc.ParticleSystemcc.ParticleSystemQuad.create(); 变成 cc.ParticleSystem.create();	4.	在画面模式中，cc.Sprite及其子类（subClasses）纹理已由DOM组件变成cc.Texture2D var aTexture = aSprite.getTexture(); var texWidth = aTexture.width; 变成 var aTextureSize = aSprite.getTexture().getContentSize(); var texWidth = aTextureSize.width;	5.	cc.SpriteFrameCache的addSpriteFramesWithJson已被弃用, 因为 Json 模式并不支持JSB，所以我们使用XML 模式	6.	cc.SimpleAudioEngine的preloadSound 已被弃用, 请使用 preloadBackgroundMusic 及preloadEffect。	7.	在cc.EditBox 中添加setPlaceholderFontName, setPlaceholderFontSize, setFontName, setFontSize 函数 	8.	cc.TileMapAtlas的tileAt更名为 getTileAtaTileMapAtlas.tileAt(cc.p(1,1)); 变为 aTileMapAtlas.getTileAt(cc.p(1,1));	9.	cc.Sprite的setFlipX, setFlipY更名为setFlippedX, setFlippedYaSprite.setFlipX(true); 变成 aSprite.setFlippedX(true); aSprite.setFlipY(true); 变成aSprite.setFlippedY(true);