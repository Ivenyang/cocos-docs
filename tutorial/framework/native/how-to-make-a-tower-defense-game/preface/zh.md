# 如何使用Cocos2d-x制作一个塔防游戏：引子

## 预备知识

教程截图：

![image](./res/tower_defense_screenshot.png)

我们已经学习到了好多简单的游戏机制了（比如精灵、菜单等），现在我们来试着制作一款塔防游戏。
首先我们得搞清楚塔防游戏的定义：

* 敌人从一个方向出来，然后沿着一条预先设定好的路径行走，去往某个目的地（通常是地图的另一端）
* 你可以沿着那条路径来建筑一些“塔”，当敌人经过这个塔的时候，塔就会向它开火。为了能够抵挡一波又一波更猛的怪物的进攻，你需要不断升级你的箭塔来加强火力。
* 你可以通过挡住最后一波进攻来取得游戏的胜利（通常是20～50波），或者你也可以让他们一波接一波的通过，然后你输了。当然，你也可以向别人炫耀，你坚持到了97波啦。

这不是一个“随意的游戏”，我们需要更好地定义下“随意”这个词：玩家在玩游戏的时候，可以简单的放置一些炮塔，当战斗打响后，也可以稍微升级下炮塔。那些没有玩过塔防游戏的人，一般会在48波～50波左右就会挂掉，因为你并没有考虑到同时可能会有多种类型的怪物会进攻。你可以花一些时间来调整你的游戏参数，看看你能不能更快得取得游戏胜利，或者赚更多的钱（因为打死一个怪物一般有钱，建筑炮塔也要花钱），或者造最少的塔来取得游戏的胜利。

你可能会奇怪，难到上面这些就是制作一个塔防游戏的关键？为什么不直接给我源代码呢？耐心点！我们马上就会开始编码了。这里我想说的是，塔防游戏并不是一种新的游戏方式，因此，你想让游戏取得成功的话，那么你必须从头好好设计。所以，如果我教你们制作塔防游戏的话，我希望你们能制作一些让我玩起来觉得很趣的作品来。没有什么比制作一件让人嘘声、骂声一片的烂游戏更让人觉得难为情的了。所以，我认为，塔防游戏的质量是关键。

1.游戏不应该让玩家手忙脚乱，但是，对于那些比较快速取得游戏胜利的玩家，可以给以额外的“分数”奖励。

2.没有任何形式的资源管理--这意味着，你对于每个塔的伤害值了如指掌，而且，你并不需要建筑一些特殊的塔来解琐其它的塔的升级。

3.塔的信息和策略很重要----地图的形状，总共可以建筑多少个塔，这些都需要认真考虑。如果，你只从头到尾建筑一种类型的塔就可以把整个游戏通关，请问那有什么意思？！

4.结尾部分重要（比如，你会在第50波的时候放出一个大boss，血非常厚，移动速度也比较快等）。但是，具体怎么弄，你可以参考一下别人的做法。这主要看你的地图是怎么设计的，还有，你的塔的升级的怎么设置的。（可以升几级？升级威力提升如何等等。）

5.最重要的部分：千万不要让一种塔能够“疯狂升级”！！！（比如爆击一下500万？。。。）因为你可以建筑不同种类的塔，比如减速塔、多目标塔、激光塔等。我发现最好的玩的td游戏，就是那些游戏里面有许多种不同类型的塔，而且每种类型的功能都非常专一，非常有用，有策略性。当然也有例外情况啦，不过最好要使塔的种类多样化。